---
// src/components/ProjectLinks.astro
const {
  demo,
  repo,
  size = "md",
  demoLabel = "Live site",
  repoLabel = "Repo",
  emphasis = "auto", // "auto" | "demo" | "repo" | "none"
} = Astro.props as {
  demo?: string;
  repo?: string;
  size?: "sm" | "md";
  demoLabel?: string;
  repoLabel?: string;
  emphasis?: "auto" | "demo" | "repo" | "none";
};

const pad = size === "sm" ? "px-2.5 py-1 text-xs" : "px-3.5 py-1.5 text-sm";

const base =
  "inline-flex items-center gap-1.5 rounded-xl transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500";

const primary =
  `${base} ${pad} bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800`;
const secondary =
  `${base} ${pad} border border-slate-300 text-slate-900 hover:bg-slate-50`;

const ext = "â†—";

// Decide which link is primary
let demoIsPrimary = false;
let repoIsPrimary = false;

if (emphasis === "demo") demoIsPrimary = true;
else if (emphasis === "repo") repoIsPrimary = true;
else if (emphasis === "none") {
  demoIsPrimary = false;
  repoIsPrimary = false;
} else {
  // auto: make demo primary if present, otherwise repo primary
  if (demo) demoIsPrimary = true;
  else if (repo) repoIsPrimary = true;
}
---

{(demo || repo) && (
  <div class="flex flex-wrap gap-3">
    {demo && (
      <a
        href={demo}
        target="_blank"
        rel="noopener"
        class={demoIsPrimary ? primary : secondary}
        aria-label={`${demoLabel} ${ext}`}
      >
        {demoLabel} {ext}
      </a>
    )}
    {repo && (
      <a
        href={repo}
        target="_blank"
        rel="noopener"
        class={repoIsPrimary ? primary : secondary}
        aria-label={`${repoLabel} ${ext}`}
      >
        {repoLabel} {ext}
      </a>
    )}
  </div>
)}
